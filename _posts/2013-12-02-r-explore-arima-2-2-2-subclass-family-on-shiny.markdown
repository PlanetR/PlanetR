---
title: "R: Explore ARIMA(2, 2, 2) subclass family on Shiny"
kind: article
created_at: 2013-12-02 01:32:00 UTC
author: Alstatr
categories: 
tags: 
layout: post
---
<div dir="ltr" style="text-align: left;" trbidi="on">I've been thinking that it might be better to explore the Box-Jenkins ARIMA (Autoregressive Integrated Moving-Average) three-iterative modelling on Shiny. So here is what I got, this app is intended for ARIMA(2, 2, 2) subclass family only.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-WzkJRjqfRIU/UpsGg0PU9kI/AAAAAAAABK0/vtduzKrZeLg/s1600/Screenshot+from+2013-12-01+17:44:56.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-WzkJRjqfRIU/UpsGg0PU9kI/AAAAAAAABK0/vtduzKrZeLg/s640/Screenshot+from+2013-12-01+17:44:56.png" height="221" width="400" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"></div>The app has six tabs, and these are:<br /><ol style="text-align: left;"><li>Historical Plot;</li><li>Identification;</li><li>Estimation;</li><li>Diagnostic; </li><li>Forecast; and</li><li>Data</li></ol>The first tab is where the time plot of the simulated time series, the series can be simulated from different subclass family of ARIMA(2, 2, 2). The order is assigned using the controls in the side panel. The values of the parameters are set in the text field right below the plot. So for example, the ARIMA(1, 1, 1) has two text fields for AR (Autoregressive) and MA (Moving-Average) parameters as shown below. The default parameter for all models is 0.3.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-8i4VLkvTtU4/UphX9G3cXdI/AAAAAAAABHw/f8uIw2mzsjQ/s1600/Screenshot+from+2013-11-29+16:56:51.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-8i4VLkvTtU4/UphX9G3cXdI/AAAAAAAABHw/f8uIw2mzsjQ/s1600/Screenshot+from+2013-11-29+16:56:51.png" /></a></div>The next tab is Identification, this is the first stage of Box-Jenkins iterative modelling. Here, the model is identified using the correlograms, Autocorrelation Function (ACF) and Partial Autocorrelation Function (PACF).<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-a6SpMz-iXg4/UprEoz6-lMI/AAAAAAAABI8/y69mtelpNJ8/s1600/Screenshot+from+2013-12-01+13%253A08%253A37.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-a6SpMz-iXg4/UprEoz6-lMI/AAAAAAAABI8/y69mtelpNJ8/s640/Screenshot+from+2013-12-01+13%253A08%253A37.png" height="226" width="400" /></a></div><br /><a name='more'></a><div class="separator" style="clear: both; text-align: center;"></div>Inside this tab are three subtabs: ACF, PACF, and Differenced Series. The third subtab (Differenced Series) shows nothing unless you apply differencing (by checking Apply Differencing? check box). Now after identifying the model, we then proceed to the second stage of modelling which is the Estimation.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-RAuFnExr0xg/UprPI75Bn4I/AAAAAAAABJI/26skCykBQZk/s1600/path3015.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-RAuFnExr0xg/UprPI75Bn4I/AAAAAAAABJI/26skCykBQZk/s400/path3015.png" height="161" width="400" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"></div>The side panel here is changed, the range&nbsp;for both Autoregressive and Moving-Average sliders is now from 0 to 5. I extend this, so that we can play with the different fitted values from different combinations of model's orders. And of course, the order of differencing remains the same. If you prefer to include constant (intercept) in the model, you can check the box. Note that, the intercept is ignored if there is differencing in the model (from <a href="http://stat.ethz.ch/R-manual/R-patched/library/stats/html/arima.html" target="_blank">arima</a> R Documentation).<br /><br />After obtaining the estimates, let's diagnose the model, by cheking for randomness of the residuals. So here is the main panel of Diagnostic tab,<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-n1bDbF6s5Lo/UprVU6h24FI/AAAAAAAABJY/SEcVaLdgkxk/s1600/Screenshot+from+2013-12-01+14:19:33.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-n1bDbF6s5Lo/UprVU6h24FI/AAAAAAAABJY/SEcVaLdgkxk/s640/Screenshot+from+2013-12-01+14:19:33.png" height="354" width="400" /></a></div>As you notice, I made a simple hypothesis testing which is dynamic. The values in COMPUTATION section updates automatically if we change the order of the identified model. The same case for the last two sections (DECISION and CONCLUSION). You will see how it works especially when we deviate the order of the model from the identified one, say if we simulate ARIMA(1, 1, 0), and we assign the identified order as ARIMA(0, 0, 1), then we will have something like this,<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-O71oyR-yZ9A/UprXvp1vfkI/AAAAAAAABJk/HLUl4gLD8XM/s1600/Screenshot+from+2013-12-01+14:29:55.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-O71oyR-yZ9A/UprXvp1vfkI/AAAAAAAABJk/HLUl4gLD8XM/s640/Screenshot+from+2013-12-01+14:29:55.png" height="356" width="400" /></a></div><br /><div class="separator" style="clear: both; text-align: center;"></div>The p-value is less than 0.05, thus the decision is to reject the null hypothesis, which concludes that the residuals are not independently distributed. And if we look at the time plot of the residuals, we see a pattern on it which isn't random, hence agrees with the conclusion. On this tab, you will find a new option for histogram, an idea from the basic Shiny's <a href="http://www.rstudio.com/shiny/" target="_blank">example</a>.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/--SXnFNDopPw/UprZpJmyvDI/AAAAAAAABJw/f84Lsqkxnu8/s1600/Screenshot+from+2013-12-01+14:38:21.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/--SXnFNDopPw/UprZpJmyvDI/AAAAAAAABJw/f84Lsqkxnu8/s320/Screenshot+from+2013-12-01+14:38:21.png" height="237" width="320" /></a></div><br />Finally, we compute the predicted values and plot this along with the original data.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-Jby4lFjJR34/UpsGXgsSs_I/AAAAAAAABKs/b-DEvXHhGmA/s1600/Screenshot+from+2013-12-01+17:45:17.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-Jby4lFjJR34/UpsGXgsSs_I/AAAAAAAABKs/b-DEvXHhGmA/s640/Screenshot+from+2013-12-01+17:45:17.png" height="267" width="400" /></a></div><br />And as mentioned, the sixth tab is the data. <br /><br /><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-3Vh3heGKe4s/UpsGOLcn1NI/AAAAAAAABKk/Z_73aIFH4Rg/s1600/Screenshot+from+2013-12-01+17:45:56.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-3Vh3heGKe4s/UpsGOLcn1NI/AAAAAAAABKk/Z_73aIFH4Rg/s640/Screenshot+from+2013-12-01+17:45:56.png" height="228" width="400" /></a></div><br /><br /><br /><center><form><input onclick="window.open('http://spark.rstudio.com/alstated/arima/', '_blank')" type="button" value="Go to App!" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input onclick="window.open('https://github.com/alstat/Analysis-with-Programming/blob/master/2013/R/Explore-ARIMA-2-2-2-subclass-family-on-Shiny/ui.R', '_blank')" type="button" value="UI Source Code" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input onclick="window.open('https://github.com/alstat/Analysis-with-Programming/blob/master/2013/R/Explore-ARIMA-2-2-2-subclass-family-on-Shiny/server.R', '_blank')" type="button" value="Server Source Code" /></form></center></div><div class="author">
  <img src="" style="width: 96px; height: 96;">
  <span style="position: absolute; padding: 32px 15px;">
    <i>Original post by <a href="http://twitter.com/">Alstatr</a> - check out <a href="http://alstatr.blogspot.com/">Analysis with Programming</a></i>
  </span>
</div>
