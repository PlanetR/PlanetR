---
title: "R: How to Layout and Design an Infographic"
kind: article
created_at: 2015-02-26 14:34:00 UTC
author: Alstatr
categories: 
tags: 
layout: post
---
<div dir="ltr" style="text-align: left;" trbidi="on">As promised from my <a href="http://alstatr.blogspot.com/2015/02/philippine-infographic-recapitulation.html" target="_blank">recent article</a>, here's my tutorial on how to layout and design an infographic in R. This article will serve as a template for more infographic design that I plan to share on future posts. Hence, we will go through the following sections:  <br /><ol><li>Layout - mainly handles by <a href="http://cran.r-project.org/web/packages/grid/index.html" target="_blank">grid</a> package.</li><li>Design - style of the elements in the layout. <ul><li>Texts - use <a href="http://cran.r-project.org/web/packages/extrafont/index.html" target="_blank">extrafont</a> package for custom fonts;</li><li>Shapes (lines and point characters) - use <a href="http://cran.r-project.org/web/packages/grid/index.html" target="_blank">grid</a>, although this package has been removed from CRAN (as of February 26, 2015), the compressed file of the source code of the package is still available. But if I am not mistaken, by default this package is included in R. You might check it first before installing.</li><li>Plots - several choices for plotting data in R: base plot, <a href="http://cran.r-project.org/web/packages/lattice/index.html" target="_blank">lattice</a>, or <a href="http://cran.r-project.org/web/packages/ggplot2/index.html" target="_blank">ggplot2</a> package.</li></ul></li></ol><h3>The Infographic</h3>We aim to obtain the following layout and design in the final output of our code: <br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-wGPh5eCyZE0/VOVPK4jX2DI/AAAAAAAACaw/mvfEUBi7X20/s1600/Infographics.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-wGPh5eCyZE0/VOVPK4jX2DI/AAAAAAAACaw/mvfEUBi7X20/s1600/Infographics.png" height="640" width="320" /></a></div><a name='more'></a>To start with, we need to setup our data first. And for illustration purposes, we will use a simulated data: <br /><br /><script src="https://gist.github.com/alstat/0af7bfceae62e5c37115.js"></script><h3>Design: Colour</h3>The aesthetic of an infographic not only depends on the shapes and plots, but also on the colours. So if you are not an artist, I suggest to look first for a list of sample infographics to get some inspiration. Once you have found the theme for your chart, grab the colour of it. To grab the colour, use eyedropper tool from software such as photoshop, affinity designer, etc. There is also free add ons for Mozilla Firefox called <a href="http://www.colorzilla.com/firefox/" target="_blank">ColorZilla</a>, I haven't tried it but maybe you could explore that. For the above theme, there are five colours with the following hexadecimal colour code: <br /><br /><div class="datagrid"><table><thead><tr><th>Colour Name</th><th>Hexadecimal</th></tr></thead><tfoot><tr><td colspan="2" style="text-align: center;"><div id="paging"><i>Table 1: Colours Used in the Chart.</i></div></td></tr></tfoot><tbody><tr><td>Dark Violet</td><td><code>#552683</code></td></tr><tr class="alt"><td>Dark Yellow</td><td><code>#E7A922</code></td></tr><tr><td>White</td><td><code>#FFFFFF</code></td></tr><tr class="alt"><td>Gray (Infographic Text)</td><td><code>#A9A8A7</code></td></tr><tr><td>Dark Yellow (Crime Text)</td><td><code>#CA8B01</code></td></tr></tbody></table></div><br /><h3>Design: Data Visualization</h3>At this point, we'll prepare the elements in the layout, and we begin with the plots. Below is the bar plot of <code>y1</code> in the data frame, <code>dat</code>, in three groupings, <code>grp</code>. Note that the plot you'll obtain will not be the same with the one below since the data changes every time we run the simulation above. <br /><div class="separator" style="clear: both; text-align: center;"><img border="0" src="http://1.bp.blogspot.com/-DzERHLvZRk4/VOyiyMEPfSI/AAAAAAAACbA/_KNPwVsYpPk/s1600/Rplot08.png" /></div><script src="https://gist.github.com/alstat/7f1369f458163f8be96b.js"></script>So that's the default theme of ggplot2, and we want to customize this using the <code>theme</code> function. One of the elements in the plot that will be tweaked is the font. To deal with this we need to import the fonts using the extrafont package. That is,<br /><br /><script src="https://gist.github.com/alstat/650a227c7871f40ecb2e.js"></script>What happens above is that all fonts installed in your machine will be imported. It's better to import all of it so that we'll have several choices to play on. For the above infographic, the font used is called <a href="http://en.wikipedia.org/wiki/Impact_(typeface)" target="_blank">Impact</a>, which is available on windows and I think on mac as well. If you don't have that, then download and install it first before running the above codes. To arrive on the design of the bar plot in the infographic we use the following theme,<br /><br /><script src="https://gist.github.com/alstat/5af5422879f07f6148c6.js"></script>I named it <code>kobe_theme</code> since if you recall from my <a href="http://alstatr.blogspot.com/2015/02/philippine-infographic-recapitulation.html" target="_blank">previous article</a>, the above chart is inspired by <a href="http://www.nba.com/lakers/multimedia/121205kobe30Kinfographic" target="_blank">Kobe Bryant Infographic</a>. So applying this to the plot we'll have the following, <br /><div class="separator" style="clear: both; text-align: center;"><img border="0" src="http://3.bp.blogspot.com/-uLLXWh01MTw/VOyjiXry8qI/AAAAAAAACbI/u6IB7wbBlX0/s1600/Rplot09.png" /></div>Obtain by running <code>p1 + kobe_theme()</code>. If in case you want to reorder the ticks in the x-axis, by starting with A from the top and ending with L in the bottom, simply run the following,<br /><br /><script src="https://gist.github.com/alstat/635ae74604e94e9e6891.js"></script>And you'll have <br /><div class="separator" style="clear: both; text-align: center;"><img border="0" src="http://4.bp.blogspot.com/-5MWp-VzxzFY/VOykraPbvII/AAAAAAAACbU/aG4eSYsgYak/s1600/Rplot10.png" /></div>So that's our first plot, next is to plot <code>y2</code> from <code>dat</code> data frame, this time using the line plot. <br /><div class="separator" style="clear: both; text-align: center;"><img border="0" src="http://2.bp.blogspot.com/-f4ot-End2D4/VOylbOlZqiI/AAAAAAAACbc/lQpnv2cAJ6c/s1600/Rplot11.png" /></div>Obtain by running the following code: <br /><br /><script src="https://gist.github.com/alstat/02a2141db4b4c7e49d29.js"></script>Applying <code>kobe_theme</code>, will give us <br /><div class="separator" style="clear: both; text-align: center;"><img border="0" src="http://4.bp.blogspot.com/-V2jLSJMp2Q8/VOynR26yXyI/AAAAAAAACbo/VO-BjlWhcIY/s1600/Rplot12.png" /></div>Above plot is generated by running <code>p2 + kobe_theme()</code>. We should expect this since the <code>kobe_theme</code> that was applied in the bar plot with <code>coord_flip</code> option enabled, affects the orientation of the grids. So instead, we do a little tweak on the current theme, and see for yourself the difference:<br /><br /><script src="https://gist.github.com/alstat/91b98a7834f244ba6c47.js"></script>So that we have the following result: <br /><div class="separator" style="clear: both; text-align: center;"><img border="0" src="http://1.bp.blogspot.com/-ghNAvA4aeK0/VOyoMtupjHI/AAAAAAAACbw/CPhFWuwDODw/s1600/Rplot13.png" /></div>Now that's better, one more issue is the title label for the legend. To change the label, run the following code:<br /><br /><script src="https://gist.github.com/alstat/8991af247f658ac346c0.js"></script>And that will give us <br /><div class="separator" style="clear: both; text-align: center;"><img border="0" src="http://2.bp.blogspot.com/-jBBM1Kz6Na0/VOyozaDK4CI/AAAAAAAACb8/2hLCkDKI0yc/s1600/Rplot14.png" /></div>Finally, <code>y3</code> variable is plotted using the following codes:<br /><br /><script src="https://gist.github.com/alstat/dc8ca2604cc8895fcd95.js"></script>by default we have, <br /><div class="separator" style="clear: both; text-align: center;"><img border="0" src="http://1.bp.blogspot.com/-Q1aLDyY5TQY/VO23o9sJ0yI/AAAAAAAACc0/PSWg5KHUb98/s1600/Rplot19.png" /></div>Applying <code>kobe_theme2()</code>, <br /><div class="separator" style="clear: both; text-align: center;"><img border="0" src="http://2.bp.blogspot.com/-Z1QS7YzB_ic/VO235t83soI/AAAAAAAACc8/NIDD3QhpZEA/s1600/Rplot20.png" /></div><script src="https://gist.github.com/alstat/b715c391f075ac5d396f.js"></script><h3>Layout</h3>All plots are now set, next is to place it in the layout. The following steps explain the procedure: <ol><li>Start by creating new grid plot, <code>grid.newpage()</code>;</li><li>Next define the layout of the grid. Think of this as a matrix of plots, where a 2 by 2 matrix plot will give us 4 windows (two rows and two columns). These windows will serve as a placeholder of the plots. So to achieve a matrix plot with 4 rows and 3 columns, we run<br/><br/><script src="https://gist.github.com/alstat/887cb68f25adc25acec0.js"></script></li><li>Next is the background colour, this will be the background colour of the infographic. For the given chart, we run the following:<br/><br/><script src="https://gist.github.com/alstat/47ae8fe3e88f9222b0ec.js"></script></li><li>Next is to insert texts in the layout, use the <code>grid.text</code> function. The position of objects/elements such as texts in the grid is defined by the (x, y) coordinates. The bound of the grid by default is a unit square, of course the aspect ratio of the square can be modified. So the support of x and y is $[0,1]^2$;</li><li>To insert the plot into a specific window in the matrix plot use the <code>vplayout</code> function for the coordinates of the placeholder, and <code>print</code> for pasting. Say we want to insert the first plot in first row, second column, we code it this way <br/><br/><script src="https://gist.github.com/alstat/4a9917a11facd5d34cb1.js"></script>Now to place it in first row and stretched it over all (three) columns, run <br/><br/><script src="https://gist.github.com/alstat/9646f44df3cc7029214a.js"></script></li></ol>Using the above procedure, we have the following codes for the infographic. Enjoy! <br /><br/><script src="https://gist.github.com/alstat/6a38f2fd4927d1d892c7.js"></script><h3>PNG Output</h3><br/><div class="separator" style="clear: both; text-align: center;"><img border="0" src="http://1.bp.blogspot.com/-WQGxAQDEopE/VO26hd0MVNI/AAAAAAAACdI/I9gMSPUnuko/s1600/Infographics1.png" height="640" width="320" /></div><br/><h3>PDF Output</h3><br/><iframe class="scribd_iframe_embed" data-aspect-ratio="undefined" data-auto-height="false" frameborder="0" height="600" id="doc_45465" scrolling="no" src="https://www.scribd.com/embeds/256799197/content?start_page=1&amp;view_mode=scroll&amp;show_recommendations=true" width="100%"></iframe><br/><br/><h3>Reference</h3><ol><li><a href="http://docs.ggplot2.org/current/" target = "_blank">ggplot2</a> Documentation.</li><li><a href="http://www.cookbook-r.com/Graphs/" target = "_blank">Cookbook for R</a>.</li></ol></div><div class="author">
  <img src="" style="width: 96px; height: 96;">
  <span style="position: absolute; padding: 32px 15px;">
    <i>Original post by <a href="http://twitter.com/">Alstatr</a> - check out <a href="http://alstatr.blogspot.com/">Analysis with Programming</a></i>
  </span>
</div>
